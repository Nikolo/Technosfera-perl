class:firstpage, title

# Программирование на Perl

## Введение

---

class:note_and_mark title

# Отметьтесь на портале!

---

# Содержание

1. **Введение**
1. История появления, становления и развития языка
1. Примеры проектов
1. Сравнение производительности
1. Необходимые знания для более лёгкого освоения курса
1. Установка интерпретатора (подготовка рабочей станции для обучения)
1. Документация, типы данных, простейшие конструкции, функции
1. Использование библиотеки cpan

---

# Что будем изучать?

Процедурное программирование

А именно, язык Perl и его область применения:

- Основы WEB-программирования

- Основы работы с базами данных

- Написание асинхронных программ

- Метаязык XS

???
- Что такое программирование
- Разные парадигмы программирования
- Процедурное программирование
- Perl

---

# Как будем учиться?

12 лекционных занятий

- 11 домашних заданий (после каждой лекции кроме последней)
- время на выполнение домашних заданий: 10 календарных дней (без учёта праздников)
- проверка домашних заданий проходит в онлайне, и защищается у того преподавателя, который вёл лекцию

29 марта — хакатон в офисе mail.ru

- командная работа над разными компонентами одного приложения

3 мая — консультация

- ответы на все вопросы в рамках разумного
- досдача всех незачтённых домашних заданий

17 мая — экамен

- в формате обычного экзамена: тянем билет, решаем задачу из билета

???
Хакатон — вечером

---

# Как оцениваются результаты?

Максимальное количество балов, которое можно получить за этот курс - 100

Домашнее задание оценивается зачёт/незачёт

Максимум за хакатон — 25 баллов

Максимум за экзамен — 75 баллов

Для получения диплома необходимо набрать 70 балов

Все студенты получившие диплом будут приглашены на собеседование, для прохождения стажировки

???
Домашнее задание оценивается целиком, а не по отдельным задачам

---

# Подготовка к лекциям

У нас есть методичка!

Перед каждой лекцией студент обязан просмотреть материалы по лекции из методички, подготовить вопросы по нему.

Так же принимается фидбек по методичке:

- можно присылать материалы, которые необходимо в неё добавить

- исправление ошибок

---

# Содержание

1. Введение
1. **История появления, становления и развития языка**
1. Примеры проектов
1. Сравнение производительности
1. Необходимые знания для более лёгкого освоения курса
1. Установка интерпретатора (подготовка рабочей станции для обучения)
1. Документация, типы данных, простейшие конструкции, функции
1. Использование библиотеки cpan

---

# История создания языка Perl

.floatright[![Right-aligned image](wall_larry_wall.png)]

18 декабря 1987г. — вышла первая версия языка программирования Perl

Это была универсальная утилита для работы с текстом.

---

# История создания языка Perl

1988 год: вышла версия 2.0

1989 год: вышла версия 3.0

1991 год: вышла версия 4.0

1994 год: появляется знаменитая 5 версия языка Perl

При её подготовке было многое переосмыслено, и почти полностью переписано. Perl стал модульным, в нём появились зачатки ООП

---

# История создания языка Perl

perl6 в истории развития языка в целом:

Сайт perl6.ru появился в 2003 году

Что то вменяемое можно было написать только к 2010 году

В 2014 году стало все гораздо лучше, но в продакшене мы его еще не увидели

25 декабря 2015 года состоялся релиз компилятора Rakudo 2015.12

---

# История создания языка Perl

Как это не парадоксально, но perl6 сыграл очень большую роль в развитии perl5, придав его развитию новый толчок.

Внедрение «современности», а именно полноценная поддержка классов была успешна реализована в perl5

---

# История создания языка Perl

Итого на сегодняшний момент мы имеем хорошо зарекомендовавший себя язык

Огромную быстро растущую библиотеку

Большое, активное сообщество

Язык Perl6 и его отличный прототип, который вносит свои коррективы в развитие perl5

А так же идею сделать perl7, который быстро попадёт в продакшн, основываясь на опыте создания perl6 и надобности perl5

Высокие зарплаты

---

# Содержание

1. Введение
1. История появления, становления и развития языка
1. **Примеры проектов**
1. Сравнение производительности
1. Необходимые знания для более лёгкого освоения курса
1. Установка интерпретатора (подготовка рабочей станции для обучения)
1. Документация, типы данных, простейшие конструкции, функции
1. Использование библиотеки cpan

---

# Примеры проектов

Кто использует?

- Системные администраторы

- Web-программисты

- Не-Web-программисты

???
Не-Web-программисты для быстрого прототипирования

---

# Примеры проектов

Коробочные продукты на Perl:

- Bugzilla

- SpamAssassin

- twiki

- OTRS

- RT

---

# Примеры проектов

Монстры

Компании активно использующие Perl в инфаструктуре или имеющие сайты на нем:

- Mail.ru Group

- Yandex

- Amazon

- Booking

- New York Times

- DuckDuckGo

- DigitalOcean

- Buzzfeed

- Abills

---

# Содержание

1. Введение
1. История появления, становления и развития языка
1. Примеры проектов
1. **Сравнение производительности**
1. Необходимые знания для более лёгкого освоения курса
1. Установка интерпретатора (подготовка рабочей станции для обучения)
1. Документация, типы данных, простейшие конструкции, функции
1. Использование библиотеки cpan

---

# Сравнение производительности

Самое слабое место - это математика.

По отношению к языку С проигрыш до 20-30 раз, иногда и больше.

По отношению к js около 2-10 раз

По отношению к python примерно на 10%

По отношению к PHP примерно на 4%

Тяжёлые математические расчеты можно уносить в C + XS или lua, XS+FFI, PDL

???

Perl Data Language набор векторных расширений для языка программирования Perl 5-й версии. Предназначен для научных расчётов и иных задач, связанных с обработкой больших объёмов данных, в том числе: обработка изображений, компьютерное моделирование физических систем.

---

# Сравнение производительности

Регулярные выражения (парсеры)

Perl выигрывает в этом отношении у всех динамических языков и по скорости разработки и по производительности

По сравнению с языком C, perl выигрывает по скорости разработки и немного уступает по производительности

Написать регулярное выражение обычно намного проще чем однопоточный парсер на C

---

# Сравнение производительности

Работа с сетью

Доступность всех необходимых системных вызовов для построения низкоуровневых библиотек

Отличная производительность среди всех динамических языков

Разница с языком C не более чем в 3 раза однако скорость разработки гораздо выше

Связка сеть+регэкспы позволяет быстро писать прототипы, которые во многих случаях можно больше не ускорять за ненадобностью

---

# Содержание

1. Введение
1. История появления, становления и развития языка
1. Примеры проектов
1. Сравнение производительности
1. **Необходимые знания для более лёгкого освоения курса**
1. Установка интерпретатора (подготовка рабочей станции для обучения)
1. Документация, типы данных, простейшие конструкции, функции
1. Использование библиотеки cpan

---

# Необходимые знания

- Linux

- git (на портале есть обучающее [видео](https://park.mail.ru/blog/topic/view/7985/))

- SSH (авторизация по ключам)

- Командная строка (shell)

- Текстовый редактор

---

# Рекомендуемые знания

- Любой другой язык программирования

- Теория баз данных (реляционных)

- Представление о работе сети интернет

- Базовая алгоритмическая подготовка

- ООП (теория)

---

# Содержание

1. Введение
1. История появления, становления и развития языка
1. Примеры проектов
1. Сравнение производительности
1. Необходимые знания для более лёгкого освоения курса
1. **Установка интерпретатора (подготовка рабочей станции для обучения)**
1. Документация, типы данных, простейшие конструкции, функции
1. Использование библиотеки cpan

---

# Настройка окружения

perl завоевал к себе доверие, за счет того, что был портирован под всевозможные платформы и системы

![Right-aligned image](matrixcpantesters.png)

---

# Настройка окружения

MacOS.

Сам перл уже предустановлен

А вот для сборки XS-модулей, вам придётся установить себе xcode + “Command line tools”

Подробнее про установку можно прочитать в perldoc perlmacosx

Так же возможно вам может понадобится macports

---

# Настройка окружения

Linux.

Как правило дистрибутив языка перл есть в репозитории системы портов.

Например:

- для CentOS установка выполняется посредством вызова yum install perl
- для Debian: apt-get install perl
- для GenToo: emerge dev-lang/perl
- для FreeBSD: pkg install perl5

Для любителей компилировать всё под свою систему:
- make perl ./Configure -des; make test install

---

# Настройка окружения

Windows.

Используйте виртуальные машины с Linux

Если нет такой возможности - напишите мне. Я выдам бесплатную виртуалку

???
Самые популярные из вариантов:

- ActivePerl от ActiveState
- StrawberryPerl
- cygwin

Мы рекомендуем использовать StrawberryPerl

В отличие от ActivePerl он идёт сразу с компилятором mingw и установка модулей в нём становится гораздо удобнее и проще

С ActivePerl надо позаботится о наличие nmake + win32GnuUtils иначе сборка модулей будет для вас мучительной и утомляющей

---

# Настройка окружения

После установки проверяем доступность интерпретатора: perl -v

Выдача будет примерно такой

```bash
This is perl 5, version 18, subversion 2 (v5.18.2) built for 
x86_64-linux-gnu-thread-multi
(with 40 registered patches, see perl -V for more detail)

Copyright 1987-2013, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.
```

---

# Настройка окружения

Если вы видите, например, «Command not found». Или другие ошибки, то с установкой что то пошло не так.

Возможно интерпретатор находится за пределами всех возможных путей из переменной окружения среды PATH

---

# Содержание

1. Введение
1. История появления, становления и развития языка
1. Примеры проектов
1. Сравнение производительности
1. Необходимые знания для более лёгкого освоения курса
1. Установка интерпретатора (подготовка рабочей станции для обучения)
1. **Документация, типы данных, простейшие конструкции, функции**
1. Использование библиотеки cpan

---

# Документация

Сайты:

- [perl.org](http://perl.org)

- [learn.perl.org](http://learn.perl.org)

- [pm.org](http://pm.org)

---

# Документация

Книги:

- Advanced Perl Programming

- Effective Perl Programming

- Learning Perl

- Modern Perl

- Programming Perl

---

# Документация (perldoc)

Самое полное и точное собрание документации находится в perldoc-е

Perldoc — утилита распространяемая с дистрибутивом perl.

Она помогает:

- быстро находить необходимую информацию

- узнавать о нововведениях

- находить новые и пополнять существующие знания о правильном использовании языка и стилистике написания программ

???
perldoc идущий с перлом — тру. На сайте надо следить за версией

---

# Документация (perldoc)

С чего начать?

Конечно же с запуска perldoc perl

---

# Документация (perldoc)

Тут можно найти название разделов с обучающими материалами

perlrequick, perlretut — быстрое начало работы с регулярными выражениями и полное описание работы с ними

perlboot, perltoot, perltooc, perlbot — perl и ООП или ООП в perl

perlstyle — стилистика написания программ

perlfaq* - часто задаваемые вопросы по перлу

perlrun — запуск программ

---

layout: true

.footer[[perlrun](http://perldoc.perl.org/perlrun.html)]

# Запуск скриптов

---

Разберёмся с запуском и выполнением простейших однострочных скриптов.

Именно с этого и пошло развитие этого языка

Самое приятное — это то, что perl под всеми системами работает одинаково, за исключением системнозависимых библиотек.

---

Ключ -e сообщает интерпретатору, что следующую за ключом строку надо выполнить, как скрипт:

```bash
perl -e 'print "Hello world\n"'
```

Однако будьте аккуратны с кавычками, не все шеллы одинаково с ними работают.

---

layout:false

# Документация (perldoc)

Так же можно найти и техническую документацию.

perlrequick, perlretut — быстрое начало работы с регулярными выражениями и полное описание работы с ними

perlboot, perltoot, perltooc, perlbot — perl и ООП или ООП в perl

perlstyle — стилистика написания программ

perlfaq* - часто задаваемые вопросы по перлу

perlrun — запуск программ

perlsyn — синтаксис языка perl.

---

layout:true

# Синтаксис языка

.footer[[perlsyn](http://perldoc.perl.org/perlsyn.html)]

---

* Программа - последовательность конструкций (statement)
* Синтаксис близок к языку C
* Perl заимствовал идеи и конструкции из С, shell, awk, sed

---

# Простые конструкции (`STMT`)

```perl
$a = 42;
print "test";
eval { ... };
do { ... };
my $var;
# Комментарий
```

Простые конструкции возвращают значение

---

# Блок

```perl
* {
statement;
statement;
...
* }
```

---

# Управляющие конструкции

* Условия: `if`, `unless`, `elsif`, `else`
* Циклы: `while`, `until`, `for`, `foreach`
* Безусловный переход: `goto`

---

# Условия - `if`

```perl
if     ( EXPR ) { ... }
```

```perl
if     ( EXPR ) { ... }
else            { ... }
```

```perl
if     ( EXPR ) { ... }
elsif  ( EXPR ) { ... }
```

```perl
if     ( EXPR ) { ... }
elsif  ( EXPR ) { ... }
else            { ... }
```

`elsif`, а не `elseif` или `else if`

???
elsif — Ruby
elseif — PHP
else if — Javascript

---

# Условия - `unless`

```perl
unless ( EXPR ) { ... } # ≣ if ( not EXPR )
```

```perl
unless ( EXPR ) { ... }
else            { ... }
```

```perl
unless ( EXPR ) { ... }
elsif  ( EXPR ) { ... }
```

```perl
unless ( EXPR ) { ... }
elsif  ( EXPR ) { ... }
else            { ... }
```

---

# Циклы - `while` / `until`

---

```perl
while ( EXPR ) { ... }
```
```perl
until ( EXPR ) { ... }
```

---

# Циклы - `for` / `foreach`

---

# Циклы - `for` / `foreach`

.center[
## `for` ≡ `foreach`
]

---

layout:true

.footer[[perlsyn](http://perldoc.perl.org/perlsyn.html)]

# Циклы - `for` / `foreach`

---

```perl
for ( EXPR; EXPR; EXPR ) { ... }
```

```perl
for ( LIST ) { ... }
```

```perl
STMT for ( LIST );
```

```perl
for VAR ( LIST ) { ... }
```

---

layout:true
# Типы данных, простейшие конструкции, функции

---

perlrequick, perlretut — быстрое начало работы с регулярными выражениями и полное описание работы с ними

perlboot, perltoot, perltooc, perlbot — perl и ООП или ООП в perl

perlstyle — стилистика написания программ

perlfaq* - часто задаваемые вопросы по перлу

perlrun — запуск программ

perlsyn — синтаксис языка perl.

perlsyn — синтаксис языка perl.

perldata — типы данных используемых в перле. Типы данных? В перле есть типы данных?

---

layout:true

.footer[[perldata](http://perldoc.perl.org/perldata.html)]

# Переменные - типы

---

* SCALAR
* ARRAY
* HASH

---

* SCALAR (`$s`, `$s = 1`, `$s = "str"`, `$s = undef`)
 - Number 
 - String
 - Reference
* ARRAY
* HASH

---

layout:true
# Документация

---

...

perlsyn — синтаксис языка perl.

perldata — типы данных используемых в перле. Типы данных? В перле есть типы данных? Да там есть 3 типа данных «Скаляр» $var, «Массив» @var, «Ассоциативный массив» (хэш) %var.

perlvar - специальные переменные

perlfunc - описание встроенных функций

---

layout:true
# Описание встроенных функций

---

* `eval`, `die`, `warn`

```perl
eval "syntax:invalid";
warn $@ if $@;

eval { $a/$b; };
warn $@ if $@;

eval { die "Not root" if $<; };
warn $@ if $@;

eval {      # try
    ...;
1} or do {  # catch
    warn "Error: $@";
};
```

---

* `chop`, `chomp`

```perl
$/ = "\r\n";
$a = $b = "test\r\n";
chop($a),chop($a),chop($a); # \n,\r,t
say $a;
chomp($b),chomp($b) # \r\n, '';
say $b;
```

* `index`, `rindex`, `substr`, `length`

```perl
#            ↓─────index($_," ") # 4
$_  =   "some average string\n";
#           └─┬─┘    ↑───rindex($_," ") # 12
#        substr($_,3,5) = "e ave"
```

---

* `lc`, `lcfirst`, `uc`, `ucfirst`, `fc`

```perl
$big = "WORD"; $small = "word";
say lc $big;         # word "\L"
say lcfirst $big;    # wORD "\l"
say uc $small;       # WORD "\U"
say ucfirst $small;  # Word "\u"

say "equal" if
    fc $big eq fc $small; # v5.16+

say "\u\LnAmE\E"; # Name
```

---

* `sprintf`

```perl
$a = sprintf "%c %s %d %u\n%o %x %e %f %g",
    9786, "str", -42, -1, 2537,
    57005, 1/9, 1/3, .6626E-33;
say $a;
# ☺ str -42 18446744073709551615
# 4751 dead 1.111111e-01 0.333333 6.626e-34
```

---

...

perlsyn — синтаксис языка perl.

perldata — типы данных используемых в перле. Типы данных? В перле есть типы данных? Да там есть 3 типа данных «Скаляр» $var, «Массив» @var, «Ассоциативный массив» (хэш) %var.

perlvar - специальные переменные

perlfunc - описание встроенных функций

perlsub - всё что касается объявления и использования подпрограмм.

---

* Объявление

```perl
sub mysub;
...
sub mysub {
    my $a1 = shift;   # one arg
    my $a2 = shift;   # another arg

    my $r = $a1 + $a2;

    return $r; # return list
    $r; # implicit ret, last statement
}

my $sub = sub {
    my $a1 = shift;
    return $a1 * 2;
}

```

---

* Вызов

```perl
mysub(...);
mysub ...;

$sub->(...);
```

---

...

perlsyn — синтаксис языка perl.

perldata — типы данных используемых в перле. Типы данных? В перле есть типы данных? Да там есть 3 типа данных «Скаляр» $var, «Массив» @var, «Ассоциативный массив» (хэш) %var.

perlvar - специальные переменные

perlfunc - описание встроенных функций

perlsub - всё что касается объявления и использования подпрограмм.

perlpod* - документирование кода

perlmod* - модульность в перле

perlxs*, perlembed, perlcall - интеграция языка perl и C

---

Это набор наверно основных точек документации с которыми вам придётся сталкиваться на протяжении первых лекций и при выполнении домашних заданий.

Но это далеко не все разделы документации которые есть в perldoc

На протяжении всего курса мы будем указывать ссылки на документацию

Так же документацию можно смотреть на http://perldoc.perl.org

---

layout: false

# Содержание

1. Введение
1. История появления, становления и развития языка
1. Примеры проектов
1. Сравнение производительности
1. Необходимые знания для более лёгкого освоения курса
1. Установка интерпретатора (подготовка рабочей станции для обучения)
1. Документация, типы данных, простейшие конструкции, функции
1. **Использование библиотеки cpan**

---

# Модули

У нас есть [CPAN](http://cpan.org) и утилита cpan — она идёт вместе с perl

А ещё есть [metacpan](http://metacpan.org)

---

# Модули

Пример установки модуля:

```bash
$ cpan install MP3::Tag
```

При первом запуске выбираем автоматическую конфигурацию, local::lib и разрешаем добавить необходимые строки в .bashrc

---

# Модули

Пример использования модуля

```perl
use MP3::Tag;

my $mp3 = MP3::Tag->new( '01.mp3' );

print $mp3->artist . " - " . $mp3->title . "\n";
```

```bash
$ perl mp3.pl
Dire Straits & Mark Knopfler - Telegraph Road
```

Однострочник
```perl
perl -MMP3::Tag -lwe '$mp3 = MP3::Tag->new("01.mp3");
print $mp3->artist . " - " . $mp3->title'
```

---

# Встроенные модули

Data::Dumper — модуль, который поможет выводить на экран в развернутом виде сложные структуры данных.

```perl
use Data::Dumper;
my $foo = [{a => 1, b => 2},{c => 3, d => 4}];
print Dumper($foo);
```

Вот так красиво демонстрирует эту переменную Data::Dumper

```perl
$VAR1 = [
  {
    'b' => 2,
    'a' => 1
  },
  {
    'c' => 3,
    'd' => 4
  }
];
```

---

# Модуль DDP

Некоторые отличия от Data::Dumper

Автор этого модуля позаботился о цветовой разметке выводимых данных, для удобства чтения.

Так же у этого модуля более расширенный дамп объектов, но нет сериализации

```perl
\ SomeClass  {
    Parents       Moose::Object
    Linear @ISA   SomeClass, Moose::Object
    public methods (3) : bar, foo, meta
    private methods (0)
    internals: {
        _something => 42,
    }
}
```

---

# Домашнее задание

https://github.com/Nikolo/Technosfera-perl.git

homeworks/simple_tasks

README.md - описание задач

Запуск тестов

```bash
$ perl Makefile.PL && make test
```

Запуск теста для одной задачи (например, 4-ой):

```bash
Technosfera-perl/homeworks/simple_tasks$ perl t/04.t 
1..2
ok 1 - ffff0000 value
ok 2 - 80000000 value
```

???
$num = rand > 0.5 ? 16 : 31;

---

# Домашнее задание

1. Найти решение квадратного уравнения (bin/01.pl)
1. Вывести простые числа из диапазона от X до Y (bin/02.pl)
1. Даны три числа. Вывести наименьшее и наибольшее  (bin/03.pl)
1. Дано 32-битное беззнаковое число больше нуля, найти номер первого не нулевого бита (bin/04.pl) 
1. Найти количество вхождений строки в подстроку (bin/05.pl)
1. Шифр Цезаря https://ru.wikipedia.org/wiki/%D0%A8%D0%B8%D1%84%D1%80_%D0%A6%D0%B5%D0%B7%D0%B0%D1%80%D1%8F для ASCII символов (bin/06.pl)

???
Биты считаются с 1

---

# TIMTOWTDI

There's More Than One Way To Do It

Существует множество вариантов, как реализовать одно и то же. Использовать при написании программы следует тот вариант, который лучше всего читается.

???
При решении домашних заданий можно использовать любые знания

---

class:lastpage title

# Спасибо за внимание!

## Отметьтесь на портале, оставьте отзыв

.teacher[![teacher]()]
